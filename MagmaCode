ChangeDirectory("/home/s3209784/Documents/MasterProject");
GetCurrentDirectory();
iload "magma_lecture9.m";
Qx<x> := PolynomialRing(Rationals());
f:= x^2+1;
K<a> := NumberField(f);
Qy<y> := PolynomialRing(K);                        
g := y^5+1;
C:= HyperellipticCurve(g);              
J := Jacobian(C);
TorsionBound(J,5);
MaximalOrder(K);
Integers(K); // all yield same result
O := RingOfIntegers(K);
p := 3;
Decomposition(O,p); // check for the primes lying above p
Decomposition(K,p);
I := 2*O; // create ideal pO
IsPrime(I);
Factorization(I);
L := Decomposition(O,2)[1][1]; // the second index is for the ramification index of L but we want only the ideal
RamificationIndex(L);
Valuation(I,L); // valuation using prime ideal L
I1 := 5*O;
Valuation(I1,L);
quo< O | L >;
//L1 := OMRepresentation(L);
//ResidueField(O, L1);
b := Random(K,3) // second value referes to maximal size of coefficients
b in O;
a in O;
Numerator(b);
Completion(K,L);
Basis(K);
IntegralBasis(K,O);
Coef := Coefficients(g);
Coef[1] in O;
&and[ c in O : c in Coefficients(g)];
&and[ c in O : c in [a,b]];     
K1 := FieldOfFractions(O);
b in K1;
Denominator(b);
Numerator(b);
b^-1; // multiplicative inverse of b
Prod := &*[Denominator(c) : c in Coef];
Coef1 := [c*Prod : c in Coef];
f1 := elt< Qy | Coef1 >; 
f1;
L in BadPrimes(C);
I := Decomposition(O,3)[1][1];
I in BadPrimes(C);
Kv := Completion(K,I);
Ov := RingOfIntegers(Kv); // note that ring of integers of complete field is the set of elements with absolute value \geq 1, i.e. the valuation ring
k := ResidueClassField(Ov); // note that mapping that is also included in command in now ignored, i.e. k is only defined as the field
_,phi := ResidueClassField(Ov); // the mapping refered to above
J3 := BaseChange(J,k);
Random(J3);
BaseField(J);
P := C![0,1];
Cpts := Points(C: Bound := 10^4);                                            
Cpts; 
Points(J:Bound:=500);
Q := Points(J:Bound:=500)[2];
Height(Q);
CanonicalHeight(Q);
